(()=>{"use strict";var e={726:function(e,t,r){var a;!function(n){if("function"!=typeof o){var o=function(e){return e};o.nonNative=!0}const s=o("plaintext"),i=o("html"),c=o("comment"),l=/<(\w*)>/g,u=/<\/?([^\s\/>]+)/;function d(e,t,r){return m(e=e||"",f(t=t||[],r=r||""))}function f(e,t){return{allowable_tags:e=function(e){let t=new Set;if("string"==typeof e){let r;for(;r=l.exec(e);)t.add(r[1])}else o.nonNative||"function"!=typeof e[o.iterator]?"function"==typeof e.forEach&&e.forEach(t.add,t):t=new Set(e);return t}(e),tag_replacement:t,state:s,tag_buffer:"",depth:0,in_quote_char:""}}function m(e,t){if("string"!=typeof e)throw new TypeError("'html' parameter must be a string");let r=t.allowable_tags,a=t.tag_replacement,n=t.state,o=t.tag_buffer,l=t.depth,u=t.in_quote_char,d="";for(let t=0,f=e.length;t<f;t++){let f=e[t];if(n===s)if("<"===f)n=i,o+=f;else d+=f;else if(n===i)switch(f){case"<":if(u)break;l++;break;case">":if(u)break;if(l){l--;break}u="",n=s,o+=">",r.has(p(o))?d+=o:d+=a,o="";break;case'"':case"'":u=f===u?"":u||f,o+=f;break;case"-":"<!-"===o&&(n=c),o+=f;break;case" ":case"\n":if("<"===o){n=s,d+="< ",o="";break}o+=f;break;default:o+=f}else if(n===c)if(">"===f)"--"==o.slice(-2)&&(n=s),o="";else o+=f}return t.state=n,t.tag_buffer=o,t.depth=l,t.in_quote_char=u,d}function p(e){let t=u.exec(e);return t?t[1].toLowerCase():null}d.init_streaming_mode=function(e,t){let r=f(e=e||[],t=t||"");return function(e){return m(e||"",r)}},void 0===(a=function(){return d}.call(t,r,t,e))||(e.exports=a)}()}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{let e;var t,a=function(t){var r=t.colClass,a=t.post,n=a.link,o=a.title;return React.createElement("td",{className:r},React.createElement("a",{href:n},function(t){if("string"!=typeof t||-1===t.indexOf("&"))return t;void 0===e&&(e=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),e.innerHTML=t;const r=e.textContent;return e.innerHTML="",r}(o)))},n=new Uint8Array(16);function o(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(n)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const i=function(e){return"string"==typeof e&&s.test(e)};for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!i(r))throw TypeError("Stringified UUID is invalid");return r};const d=function(e,t,r){var a=(e=e||{}).random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=a[n];return t}return u(a)};var f=r(726),m=r.n(f),p=function(e){var t=e.html;return React.createElement("div",{dangerouslySetInnerHTML:{__html:m()(t,"<strong><p>")}})},g=function(e){var t=e.post,r=t.number_of_votes,a=t.rating,n=e.text;if(void 0!==r){var o=JSON.parse(yasrWindowVar.textAfterVr);return o=(o=o.replace("%total_count%",r)).replace("%average%",a),React.createElement("div",{className:"yasr-most-rated-text"},React.createElement(p,{html:o}))}return React.createElement(React.Fragment,null,n," ",a)},y=function(e){var t=e.size,r=e.htmlId,a=e.element,n=e.step,o=e.readonly,s=e.rating;return React.createElement("div",{id:r,ref:function(){return yasrSetRaterValue(t,r,a,n,o,s)}})},h=function(e){var t=e.rankingParams,r=e.tableId,a=e.colClass,n=e.post,o="after",s=JSON.parse(yasrWindowVar.textRating),i=new URLSearchParams(t);null!==i.get("text_position")&&(o=i.get("text_position")),null!==i.get("custom_txt")&&(s=i.get("custom_txt"));var c={rating:n.rating,htmlId:"yasr-ranking-element-"+d(),size:document.getElementById(r).dataset.rankingSize};return"before"===o?React.createElement("td",{className:a},React.createElement(g,{post:n,text:s}),React.createElement(y,c)):React.createElement("td",{className:a},React.createElement(y,c),React.createElement(g,{post:n,text:s}))},v=function(e){return React.createElement("tr",{className:e.trClass},React.createElement(a,{colClass:e.leftClass,post:e.post}),React.createElement(h,e))},b=function(e){var t=e.tBodyId,r=e.show,a=e.data,n=e.source,o=e.rankingParams,s=e.tableId;return React.createElement("tbody",{id:t,style:{display:r}},a.map((function(e,t){var r="yasr-rankings-td-colored",a="yasr-top-10-most-highest-left",i="yasr-top-10-most-highest-right";return"author_ranking"===n&&(r="yasr-rankings-td-white",a="yasr-top-10-overall-left",i="yasr-top-10-overall-right"),t%2==0&&(r="yasr-rankings-td-white","author_ranking"===n&&(r="yasr-rankings-td-colored")),React.createElement(v,{key:e.post_id,source:n,tableId:s,rankingParams:o,post:e,trClass:r,leftClass:a,rightClass:i})})))},_=function(e){return function(t){t.preventDefault();var r=t.target.id,a=e.tableId,n="link-most-rated-posts-"+a,o="link-highest-rated-posts-"+a,s="most-rated-posts-"+a,i="highest-rated-posts-"+a,c=document.getElementById(r),l=document.createElement("span");l.innerHTML=c.innerHTML,l.id=c.id,c.parentNode.replaceChild(l,c),r===n&&(document.getElementById(i).style.display="none",document.getElementById(s).style.display="",l=document.getElementById(o),c.innerHTML=l.innerHTML,c.id=l.id,l.parentNode.replaceChild(c,l)),r===o&&(document.getElementById(s).style.display="none",document.getElementById(i).style.display="",l=document.getElementById(n),c.innerHTML=l.innerHTML,c.id=l.id,l.parentNode.replaceChild(c,l))}},R=function(e){var t=e.tableId,r=e.source,a=e.defaultView,n="link-most-rated-posts-"+t,o="link-highest-rated-posts-"+t;if("author_ranking"!==r){var s=React.createElement("span",null,React.createElement("span",{id:n},JSON.parse(yasrWindowVar.textMostRated))," | ",React.createElement("a",{href:"#",id:o,onClick:_(e)},JSON.parse(yasrWindowVar.textHighestRated)));return"highest"===a&&(s=React.createElement("span",null,React.createElement("span",{id:o},JSON.parse(yasrWindowVar.textHighestRated))," | ",React.createElement("a",{href:"#",id:n,onClick:_(e)},JSON.parse(yasrWindowVar.textMostRated)))),React.createElement("thead",null,React.createElement("tr",{className:"yasr-rankings-td-colored yasr-rankings-heading"},React.createElement("th",null,JSON.parse(yasrWindowVar.textLeftColumnHeader)),React.createElement("th",null,JSON.parse(yasrWindowVar.textOrderBy),":  ",s)))}return React.createElement(React.Fragment,null)},E=function(e){var t=e.data,r=e.source,a=e.rankingParams,n=e.tableId;if("overall_rating"===r||"author_multi"===r)return React.createElement(b,{data:t,tableId:n,tBodyId:"overall_"+n,rankingParams:a,show:"table-row-group",source:r});var o=t.most,s=t.highest,i="table-row-group",c="none",l="most",u=i,d=c,f=new URLSearchParams(a);return null!==f.get("view")&&(l=f.get("view")),"highest"===l&&(u=c,d=i),React.createElement(React.Fragment,null,React.createElement(R,{tableId:n,source:r,defaultView:l}),React.createElement(b,{data:o,tableId:n,tBodyId:"most-rated-posts-"+n,rankingParams:a,show:u,source:r}),React.createElement(b,{data:s,tableId:n,tBodyId:"highest-rated-posts-"+n,rankingParams:a,show:d,source:r}))};function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=O(e);if(t){var n=O(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return I(this,r)}}function I(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var P=wp.element.render,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(o,React.Component);var t,r,a,n=S(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={error:null,isLoaded:!1,data:[],tableId:e.tableId,source:e.source,rankingParams:e.params,nonce:e.nonce},t}return t=o,(r=[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(document.getElementById(this.state.tableId).dataset.rankingData),r={};if("yes"!==yasrWindowVar.ajaxEnabled)console.info("Ajax Disabled, getting data from source"),this.setState({isLoaded:!0,data:t});else if(this.state.source){var a=function(e,t,r){var a,n=""!==e?e:"",o=t,s="&nonce_rankings="+r,i="";if(""!==n&&!1!==n){var c=new URLSearchParams(n);null!==c.get("order_by")&&(i+="order_by="+c.get("order_by")),null!==c.get("limit")&&(i+="&limit="+c.get("limit")),null!==c.get("start_date")&&"0"!==c.get("start_date")&&(i+="&start_date="+c.get("start_date")),null!==c.get("end_date")&&"0"!==c.get("end_date")&&(i+="&end_date="+c.get("end_date")),null!==c.get("ctg")?i+="&ctg="+c.get("ctg"):null!==c.get("cpt")&&(i+="&cpt="+c.get("cpt")),""!==i&&(i="&"+(i=i.replace(/\s+/g,""))),"visitor_multi"!==o&&"author_multi"!==o||null!==c.get("setid")&&(i+="&setid="+c.get("setid"))}else i="";if("author_ranking"===o||"author_multi"===o)a=[yasrWindowVar.ajaxurl+"?action=yasr_load_rankings&source="+o+i+s];else{var l="",u="";if(""!==n){var d=new URLSearchParams(n);null!==d.get("required_votes[most]")&&(l="&required_votes="+d.get("required_votes[most]")),null!==d.get("required_votes[highest]")&&(u="&required_votes="+d.get("required_votes[highest]"))}a=[yasrWindowVar.ajaxurl+"?action=yasr_load_rankings&show=most&source="+o+i+l+s,yasrWindowVar.ajaxurl+"?action=yasr_load_rankings&show=highest&source="+o+i+u+s]}return a}(this.state.rankingParams,this.state.source,this.state.nonce);Promise.all(a.map((function(e){return fetch(e).then((function(e){return!0===e.ok?e.json():(console.info("Ajax Call Failed. Getting data from source"),"KO")})).then((function(e){"KO"===e?r=t:"overall_rating"===e.source||"author_multi"===e.source?r="overall_rating"===e.source?e.data_overall:e.data_mv:r[e.show]=e.data_vv})).catch((function(e){r=t,console.info(e)}))}))).then((function(t){e.setState({isLoaded:!0,data:r})})).catch((function(t){console.info(t),e.setState({isLoaded:!0,data:r})}))}else this.setState({error:"Invalid Data Source"})}},{key:"render",value:function(){var e=this.state,t=e.error,r=e.isLoaded,a={data:this.state.data,source:this.state.source,rankingParams:this.state.rankingParams,tableId:this.state.tableId};return t?React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,console.log(t),"Error"))):!1===r?React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,JSON.parse(yasrWindowVar.textLoadRanking)))):React.createElement(React.Fragment,null,React.createElement(E,a))}}])&&k(t.prototype,r),a&&k(t,a),Object.defineProperty(t,"prototype",{writable:!1}),o}();!function(){var e=document.getElementsByClassName("yasr-stars-rankings");if(e.length>0)for(var t=0;t<e.length;t++){var r=e.item(t).id,a=JSON.parse(e.item(t).dataset.rankingSource),n=JSON.parse(e.item(t).dataset.rankingParams),o=JSON.parse(e.item(t).dataset.rankingNonce),s=document.getElementById(r);P(React.createElement(N,{source:a,tableId:r,params:n,nonce:o}),s)}}()})()})();