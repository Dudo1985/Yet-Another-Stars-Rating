(()=>{"use strict";var e={726:function(e,t,a){var r;!function(n){if("function"!=typeof o){var o=function(e){return e};o.nonNative=!0}const s=o("plaintext"),i=o("html"),l=o("comment"),c=/<(\w*)>/g,u=/<\/?([^\s\/>]+)/;function d(e,t,a){return m(e=e||"",f(t=t||[],a=a||""))}function f(e,t){return{allowable_tags:e=function(e){let t=new Set;if("string"==typeof e){let a;for(;a=c.exec(e);)t.add(a[1])}else o.nonNative||"function"!=typeof e[o.iterator]?"function"==typeof e.forEach&&e.forEach(t.add,t):t=new Set(e);return t}(e),tag_replacement:t,state:s,tag_buffer:"",depth:0,in_quote_char:""}}function m(e,t){if("string"!=typeof e)throw new TypeError("'html' parameter must be a string");let a=t.allowable_tags,r=t.tag_replacement,n=t.state,o=t.tag_buffer,c=t.depth,u=t.in_quote_char,d="";for(let t=0,f=e.length;t<f;t++){let f=e[t];if(n===s)if("<"===f)n=i,o+=f;else d+=f;else if(n===i)switch(f){case"<":if(u)break;c++;break;case">":if(u)break;if(c){c--;break}u="",n=s,o+=">",a.has(p(o))?d+=o:d+=r,o="";break;case'"':case"'":u=f===u?"":u||f,o+=f;break;case"-":"<!-"===o&&(n=l),o+=f;break;case" ":case"\n":if("<"===o){n=s,d+="< ",o="";break}o+=f;break;default:o+=f}else if(n===l)if(">"===f)"--"==o.slice(-2)&&(n=s),o="";else o+=f}return t.state=n,t.tag_buffer=o,t.depth=c,t.in_quote_char=u,d}function p(e){let t=u.exec(e);return t?t[1].toLowerCase():null}d.init_streaming_mode=function(e,t){let a=f(e=e||[],t=t||"");return function(e){return m(e||"",a)}},void 0===(r=function(){return d}.call(t,a,t,e))||(e.exports=r)}()}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e,t=new Uint8Array(16);function r(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const o=function(e){return"string"==typeof e&&n.test(e)};for(var s=[],i=0;i<256;++i)s.push((i+256).toString(16).substr(1));const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!o(a))throw TypeError("Stringified UUID is invalid");return a};const c=function(e,t,a){var n=(e=e||{}).random||(e.rng||r)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(var o=0;o<16;++o)t[a+o]=n[o];return t}return l(n)};var u=a(726),d=a.n(u),f=function(e){var t=e.html;return React.createElement("div",{dangerouslySetInnerHTML:{__html:d()(t,"<strong><p>")}})},m=function(e){var t=e.size,a=e.htmlId,r=e.element,n=e.step,o=e.readonly,s=e.rating;return React.createElement("div",{id:a,ref:function(){return yasrSetRaterValue(t,a,r,n,o,s)}})};let p;var g=function(e){var t=e.colClass,a=e.post;return React.createElement("td",{className:t},React.createElement("a",{href:a.link},function(e){if("string"!=typeof e||-1===e.indexOf("&"))return e;void 0===p&&(p=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),p.innerHTML=e;const t=p.textContent;return p.innerHTML="",t}(a.title)))};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=R(e);if(t){var n=R(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return _(this,a)}}function _(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var E=wp.element.render;function k(e){if(void 0!==e.post.number_of_votes){var t=JSON.parse(yasrWindowVar.textAfterVr);return t=(t=t.replace("%total_count%",e.post.number_of_votes)).replace("%average%",e.post.rating),React.createElement("div",{className:"yasr-most-rated-text"},React.createElement(f,{html:t}))}var a=e.text;return React.createElement("div",{className:"yasr-highest-rated-text"},a," ",e.post.rating)}function w(e){var t="after",a=JSON.parse(yasrWindowVar.textRating),r=new URLSearchParams(e.rankingParams);null!==r.get("text_position")&&(t=r.get("text_position")),null!==r.get("custom_txt")&&(a=r.get("custom_txt"));var n={rating:e.post.rating,htmlId:"yasr-ranking-element-"+c(),size:document.getElementById(e.tableId).dataset.rankingSize};return"before"===t?React.createElement("td",{className:e.colClass},React.createElement(k,{post:e.post,tableId:e.tableId,text:a}),React.createElement(m,n)):React.createElement("td",{className:e.colClass},React.createElement(m,n),React.createElement(k,{post:e.post,tableId:e.tableId,text:a}))}function I(e){return React.createElement("tr",{className:e.trClass},React.createElement(g,{colClass:e.leftClass,post:e.post}),React.createElement(w,{colClass:e.rightClass,post:e.post,tableId:e.tableId,rankingParams:e.rankingParams}))}function x(e){var t=e.tBodyId,a=e.show,r=e.data,n=e.source,o=e.rankingParams,s=e.tableId;return React.createElement("tbody",{id:t,style:{display:a}},r.map((function(e,t){var a="yasr-rankings-td-colored",r="yasr-top-10-most-highest-left",i="yasr-top-10-most-highest-right";return"author_ranking"===n&&(a="yasr-rankings-td-white",r="yasr-top-10-overall-left",i="yasr-top-10-overall-right"),t%2==0&&(a="yasr-rankings-td-white","author_ranking"===n&&(a="yasr-rankings-td-colored")),React.createElement(I,{key:e.post_id,source:n,tableId:s,rankingParams:o,post:e,trClass:a,leftClass:r,rightClass:i})})))}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(o,React.Component);var t,a,r,n=b(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={error:null,isLoaded:!1,data:[],tableId:e.tableId,source:e.source,rankingParams:e.params,nonce:e.nonce},t}return t=o,(a=[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(document.getElementById(this.state.tableId).dataset.rankingData),a={};if("yes"!==yasrWindowVar.ajaxEnabled)console.info("Ajax Disabled, getting data from source"),this.setState({isLoaded:!0,data:t});else if(this.state.source){var r=this.returnRestUrl();Promise.all(r.map((function(e){return fetch(e).then((function(e){return!0===e.ok?e.json():(console.info("Ajax Call Failed. Getting data from source"),"KO")})).then((function(e){"KO"===e?a=t:"overall_rating"===e.source||"author_multi"===e.source?a="overall_rating"===e.source?e.data_overall:e.data_mv:a[e.show]=e.data_vv})).catch((function(e){a=t,console.info(e)}))}))).then((function(t){e.setState({isLoaded:!0,data:a})})).catch((function(t){console.info(t),e.setState({isLoaded:!0,data:a})}))}else this.setState({error:"Invalid Data Source"})}},{key:"returnRestUrl",value:function(){var e,t=""!==this.state.rankingParams?this.state.rankingParams:"",a=this.state.source,r="&nonce_rankings="+this.state.nonce,n="";if(""!==t&&!1!==t){var o=new URLSearchParams(t);null!==o.get("order_by")&&(n+="order_by="+o.get("order_by")),null!==o.get("limit")&&(n+="&limit="+o.get("limit")),null!==o.get("start_date")&&"0"!==o.get("start_date")&&(n+="&start_date="+o.get("start_date")),null!==o.get("end_date")&&"0"!==o.get("end_date")&&(n+="&end_date="+o.get("end_date")),null!==o.get("ctg")?n+="&ctg="+o.get("ctg"):null!==o.get("cpt")&&(n+="&cpt="+o.get("cpt")),""!==n&&(n="&"+(n=n.replace(/\s+/g,""))),"visitor_multi"!==a&&"author_multi"!==a||null!==o.get("setid")&&(n+="&setid="+o.get("setid"))}else n="";if("author_ranking"===a||"author_multi"===a)e=[yasrWindowVar.ajaxurl+"?action=yasr_load_rankings&source="+a+n+r];else{var s="",i="";if(""!==t){var l=new URLSearchParams(t);null!==l.get("required_votes[most]")&&(s="&required_votes="+l.get("required_votes[most]")),null!==l.get("required_votes[highest]")&&(i="&required_votes="+l.get("required_votes[highest]"))}e=[yasrWindowVar.ajaxurl+"?action=yasr_load_rankings&show=most&source="+a+n+s+r,yasrWindowVar.ajaxurl+"?action=yasr_load_rankings&show=highest&source="+a+n+i+r]}return e}},{key:"rankingTableHead",value:function(e,t){var a=this.state.tableId,r="link-most-rated-posts-"+a,n="link-highest-rated-posts-"+a;if("author_ranking"!==e){var o=React.createElement("span",null,React.createElement("span",{id:r},JSON.parse(yasrWindowVar.textMostRated))," | ",React.createElement("a",{href:"#",id:n,onClick:this.switchTBody.bind(this)},JSON.parse(yasrWindowVar.textHighestRated)));return"highest"===t&&(o=React.createElement("span",null,React.createElement("span",{id:n},JSON.parse(yasrWindowVar.textHighestRated))," | ",React.createElement("a",{href:"#",id:r,onClick:this.switchTBody.bind(this)},JSON.parse(yasrWindowVar.textMostRated)))),React.createElement("thead",null,React.createElement("tr",{className:"yasr-rankings-td-colored yasr-rankings-heading"},React.createElement("th",null,JSON.parse(yasrWindowVar.textLeftColumnHeader)),React.createElement("th",null,JSON.parse(yasrWindowVar.textOrderBy),":  ",o)))}return React.createElement(React.Fragment,null)}},{key:"switchTBody",value:function(e){e.preventDefault();var t=e.target.id,a=this.state.tableId,r="link-most-rated-posts-"+a,n="link-highest-rated-posts-"+a,o="most-rated-posts-"+a,s="highest-rated-posts-"+a,i=document.getElementById(t),l=document.createElement("span");l.innerHTML=i.innerHTML,l.id=i.id,i.parentNode.replaceChild(l,i),t===r&&(document.getElementById(s).style.display="none",document.getElementById(o).style.display="",l=document.getElementById(n),i.innerHTML=l.innerHTML,i.id=l.id,l.parentNode.replaceChild(i,l)),t===n&&(document.getElementById(o).style.display="none",document.getElementById(s).style.display="",l=document.getElementById(r),i.innerHTML=l.innerHTML,i.id=l.id,l.parentNode.replaceChild(i,l))}},{key:"rankingTableBody",value:function(){var e=this.state,t=e.data,a=e.source,r=e.rankingParams;if("overall_rating"===a||"author_multi"===a)return React.createElement(x,{data:t,tableId:this.state.tableId,tBodyId:"overall_"+this.state.tableId,rankingParams:r,show:"table-row-group",source:a});var n=t.most,o=t.highest,s="table-row-group",i="none",l="most",c=s,u=i,d=new URLSearchParams(r);return null!==d.get("view")&&(l=d.get("view")),"highest"===l&&(c=i,u=s),React.createElement(React.Fragment,null,this.rankingTableHead(a,l),React.createElement(x,{data:n,tableId:this.state.tableId,tBodyId:"most-rated-posts-"+this.state.tableId,rankingParams:r,show:c,source:a}),React.createElement(x,{data:o,tableId:this.state.tableId,tBodyId:"highest-rated-posts-"+this.state.tableId,rankingParams:r,show:u,source:a}))}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded;return t?React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,console.log(t),"Error"))):!1===a?React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,JSON.parse(yasrWindowVar.textLoadRanking)))):React.createElement(React.Fragment,null,this.rankingTableBody())}}])&&y(t.prototype,a),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}();!function(){var e=document.getElementsByClassName("yasr-stars-rankings");if(e.length>0)for(var t=0;t<e.length;t++){var a=e.item(t).id,r=JSON.parse(e.item(t).dataset.rankingSource),n=JSON.parse(e.item(t).dataset.rankingParams),o=JSON.parse(e.item(t).dataset.rankingNonce),s=document.getElementById(a);E(React.createElement(S,{source:r,tableId:a,params:n,nonce:o}),s)}}()})()})();